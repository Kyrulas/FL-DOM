    var students = [{
        name: 'Liudmyla',
        lastName: 'Bashta',
        img: 'https://www.plagiarismtoday.com/wp-content/uploads/2016/07/nyancat-385-sized.jpg',
        coverImg: 'http://i2.kym-cdn.com/photos/images/facebook/000/243/865/8f3.jpg',
        email: 'liudmyla.bashta@gmail.com',
        skills: ['Javascript', 'HTML', 'CSS']
    },
    {
        name: 'Roman',
        lastName: 'Chapkailo',
        img: 'https://s-media-cache-ak0.pinimg.com/736x/76/47/9d/76479dd91dc55c2768ddccfc30a4fbf5--pikachu-halloween-costume-diy-halloween-costumes.jpg',
        coverImg: 'http://fbcovershub.com/media/cover-250-beautiful-seaside-fb-cover-1388015476.jpg',
        email: 'romafromukraine@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Khrystyna',
        lastName: 'Dalivska',
        img: 'https://ichef-1.bbci.co.uk/news/660/cpsprodpb/169F6/production/_91026629_gettyimages-519508400.jpg',
        coverImg: 'https://sky.easypano.com/EPSUpload2/Pano/2017/04-12/12/636275969355928205/560_315.jpg',
        email: 'khrystynadalivska@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Ivan',
        lastName: 'Gnatyshyn',
        img: 'https://cdn.pixabay.com/photo/2014/03/29/09/17/cat-300572_960_720.jpg',
        coverImg: 'https://static.pexels.com/photos/9135/sky-clouds-blue-horizon.jpg',
        email: 'gnatyshyn.ivan@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Andrii',
        lastName: "Hun'ka",
        img: 'https://cdn.pixabay.com/photo/2017/01/06/19/15/soap-bubble-1958650_960_720.jpg',
        coverImg: 'http://i.dailymail.co.uk/i/pix/2017/01/16/20/332EE38400000578-4125738-image-a-132_1484600112489.jpg',
        email: 'andriyggg@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Maksym',
        lastName: 'Izmailov',
        img: 'https://cdn.pixabay.com/photo/2016/04/17/10/38/doberman-1334497_960_720.jpg',
        coverImg: 'https://cdn.pixabay.com/photo/2016/03/06/05/03/sunrise-1239728_960_720.jpg',
        email: 'maksym.izmailov.lv@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Taras',
        lastName: 'Kharkhalis',
        img: 'https://cdn.pixabay.com/photo/2014/03/29/09/17/cat-300572_960_720.jpg',
        coverImg: 'https://static.pexels.com/photos/9135/sky-clouds-blue-horizon.jpg',
        email: 'taraskharkhalis97@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Khrystia',
        lastName: 'Kondratovych',
        img: 'https://www.webdesign.org/img_articles/21726/17.jpg',
        coverImg: 'https://cdn.pixabay.com/photo/2016/10/13/10/37/dandelion-1737324_960_720.jpg',
        email: 'khrustyk@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Iuliia',
        lastName: 'Kurylo',
        img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSljkhtuNjmEz2YeriPLPdntnTKNAwXFOAQSx1u6yAkPhYYw8-Pnw',
        coverImg: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQT-qepvLICH8tsGuZqbZwpO7rk5afp274Lu4bgjai8Uo30gDKifA',
        email: 'iulia.kurylo@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Roman',
        lastName: 'Mandziuk',
        img: 'http://qnimate.com/wp-content/uploads/2014/03/images2.jpg',
        coverImg: 'http://html.com/wp-content/uploads/very-large-flamingo.jpg',
        email: 'rmandzyuk94@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Oleh',
        lastName: 'Marko',
        img: 'https://www.petdrugsonline.co.uk/images/page-headers/cats-master-header',
        coverImg: 'http://wiki-carpathians.com/wp-content/uploads/2015/02/climate-carpathians.jpg',
        email: 'olehmarko@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Anatoliy',
        lastName: 'Mazur',
        img: 'https://cdn.pixabay.com/photo/2014/03/29/09/17/cat-300572_960_720.jpg',
        coverImg: 'https://static.pexels.com/photos/9135/sky-clouds-blue-horizon.jpg',
        email: 'mail4tolik@gmail.com',
        skills: ['JavaScript', 'CSS', 'HTML']
    },
    {
        name: 'Vitaliy',
        lastName: 'Palyushok',
        img: 'https://www.mammoth.com.au/res/images/mammothcloud/person-img.png',
        coverImg: 'http://facebookcovers.piz18.com/wp-content/uploads/2012/04/geek-fb-cover.jpg',
        email: 'xskeletons@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Stepan',
        lastName: 'Prokopiak',
        img: 'https://cdn.pixabay.com/photo/2014/03/29/09/17/cat-300572_960_720.jpg',
        coverImg: 'https://static.pexels.com/photos/9135/sky-clouds-blue-horizon.jpg',
        email: 'sprokopyak96@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Stepan',
        lastName: 'Sendun',
        img: 'http://i.piccy.info/i9/a25aa836358fb23a05d6e9207c976dd9/1500482900/30480/1163444/537377255ws00241_57th_annua.jpg',
        coverImg: 'http://i.piccy.info/i9/b311de1aaff52532b361a178e8e35de4/1500482959/135850/1163444/0008540461_10.jpg',
        email: 'steve.neeson21@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Andrii',
        lastName: 'Soroka',
        img: '',
        coverImg: '',
        email: '',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Illya',
        lastName: 'Syniuk',
        img: 'https://scontent-frx5-1.xx.fbcdn.net/v/t1.0-9/13654406_578754465640942_346398414832563762_n.jpg?oh=64beb0cc766acd05d9a659ff89d0aef0&oe=5A2FEB0F',
        coverImg: 'https://www.facebook.com/photo.php?fbid=578802345636154&set=a.326403767542681.1073741828.100005191805447&type=3&theater',
        email: 'illyasynuik@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Andrew',
        lastName: 'Tantsiura',
        img: 'https://cdn.pixabay.com/photo/2014/03/29/09/17/cat-300572_960_720.jpg',
        coverImg: 'https://static.pexels.com/photos/9135/sky-clouds-blue-horizon.jpg',
        email: 'andrii.tans@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Liliya',
        lastName: 'Tserkovna',
        img: 'https://scontent-frx5-1.xx.fbcdn.net/v/t1.0-1/c0.17.160.160/p160x160/14725559_311214412585028_1352062715786494390_n.jpg?oh=b2cbcb3de774187b75d5253a276bc2f7&oe=59F5D47B',
        coverImg: 'https://scontent-frx5-1.xx.fbcdn.net/v/t1.0-9/14368772_295189700854166_8626244722206545788_n.jpg?oh=02cf7516f9337bc439a42595ff893821&oe=5A051EC4',
        email: 'lilichkaTserkovna@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    },
    {
        name: 'Anton',
        lastName: 'Zhygalov',
        img: 'http://static.tvtropes.org/pmwiki/pub/images/Hello_Kitty_Pink_2981.jpg',
        coverImg: 'https://thumb1.shutterstock.com/display_pic_with_logo/156640/208511908/stock-photo-arad-romania-september-hello-kitty-pattern-printed-on-cardboard-box-studio-shot-208511908.jpg',
        email: 'antonzhygalov@gmail.com',
        skills: ['JavaScript', 'HTML', 'CSS']
    }
    ];
    var toggleStudent = true;
    var toggleEmail = true;
    var createTable = function(){
        var table = document.createElement("TABLE");
        table.setAttribute("id", "table");
        table.setAttribute("class", "table table-hover");
        var header = table.createTHead();
        var rowth = header.insertRow(0);
        var thStusent = rowth.appendChild(createTH("Student"));
        var sortLogoS = document.createElement("span");
        sortLogoS.setAttribute("class", "glyphicon glyphicon-sort");
        var sortLogo = document.createElement("span");
        sortLogo.setAttribute("class", "glyphicon glyphicon-sort");
        thStusent.onclick = function(){
            sortLogo.setAttribute("class", "glyphicon glyphicon-sort");
            sort("name", toggleStudent);
            if(toggleStudent){
                toggleStudent = false;
                 sortLogoS.setAttribute("class", "glyphicon glyphicon-sort-by-alphabet");
            }else {
                toggleStudent = true;
                 sortLogoS.setAttribute("class", "glyphicon glyphicon-sort-by-alphabet-alt");
            }
        };
        var thEmail = rowth.appendChild(createTH("Email"));

        thStusent.appendChild(sortLogoS);

        
        thEmail.onclick = function(){
            sortLogoS.setAttribute("class", "glyphicon glyphicon-sort");
            sort("email", toggleEmail);
            if(toggleEmail){
                toggleEmail = false;
                sortLogo.setAttribute("class", "glyphicon glyphicon-sort-by-alphabet");
            }else{
                toggleEmail = true;
                sortLogo.setAttribute("class", "glyphicon glyphicon-sort-by-alphabet-alt");
            }
        };

        thEmail.appendChild(sortLogo);
        rowth.appendChild(createTH("Profile picture"));
        rowth.appendChild(createTH("Skills"));
        rowth.appendChild(createTH("Controls"));
        var tblBody = document.createElement("tbody");
        tblBody.setAttribute("id", "tbody");
        appendStudentRows(tblBody);
        table.appendChild(tblBody);
        document.getElementById("container").appendChild(table);
}



function createTH(value){
    var th = document.createElement('th');
    th.innerHTML = value;
    return th;
}

function appendStudentRows(tblBody){
 students.forEach(function(student){
    appendStudentRow(tblBody, student);
});
}
function appendStudentRow(tblBody, student){
    var row = document.createElement("TR");
    row.onclick = getInfo;
    row.insertCell(0).innerHTML = student.name + " " + student.lastName;
    row.insertCell(1).innerHTML = student.email;
    row.insertCell(2).innerHTML = "<img class='studentImg' alt='student_image' src='" + student.img + "'/>";
    row.insertCell(3).innerHTML = student.skills.join(', ');
    appendControllBtns(row.insertCell(4));
    tblBody.appendChild(row);        
}
function appendControllBtns(to){
    var trashBtn = document.createElement("button");
    trashBtn.innerHTML = "<span class='glyphicon glyphicon-trash'></span>";

    var editBtn = document.createElement("button");
    editBtn.innerHTML = "<span class='glyphicon glyphicon-edit'></span>";
    editBtn.onclick = editRow;
    trashBtn.onclick = deleteRow;
    to.appendChild(editBtn);
    to.appendChild(trashBtn);
}


function deleteRow(event){
     event.stopPropagation();
    var rowIndex = this.parentNode.parentNode.rowIndex;
    document.getElementById("tbody").deleteRow(rowIndex - 1);
    students.splice(rowIndex - 1, 1);
}

function editRow(event){
     event.stopPropagation();
    var rowIndex = this.parentNode.parentNode.rowIndex;
    var editStudent = students[rowIndex - 1];
    document.getElementById("name").value= editStudent.name;
    document.getElementById("lastName").value= editStudent.lastName;
    document.getElementById("email").value= editStudent.email;
    document.getElementById("picture").value= editStudent.img;
    document.getElementById("skills").value= editStudent.skills;
    document.getElementById("index").value= rowIndex - 1;
}

function getInfo(event){
    var student = students[this.rowIndex -1];
    var studentInfo = "Student: " + student.name + " " + student.lastName + "\n" 
    + "Email: " + student.email + "\n" + "Skills: " + student.skills.join(', ');
    alert(studentInfo);
}

function createForm(){
    var form = document.createElement("FORM");
    form.setAttribute("id", "studentForm form-group  row");
    form.method="POST";
    form.onsubmit = addStudent;
    form.innerHTML = '<div class="col-xs-2"><label for="name">Name</label><input type="text" id="name" name="name" required></div>'+ 
    '<div class="col-xs-2"><label for="lastName">Lastname</label><input type="text" id="lastName" name="lastName" required></div>' +
    '<div class="col-xs-2"><label for="email">Email</label><input type="email" id="email" name="email" required></div>'+ 
    '<div class="col-xs-2"><label for="picture">Profile Picture</label><input type="text" id="picture" required></div>'+
    '<div class="col-xs-2"><label for="skills">Skills</label><input type="text" id="skills" name="skills" ></div>'+
    '<div class="col-xs-2 edit"><button class="saveBtn btn-default">Save</button>' + 
    '<input type="reset" class="clearBtn btn-info" id="reset" value="Cancel"/></div>' +
    '<input type="hidden" id="index">';
    document.getElementById("container").appendChild(form);
};

    function addStudent(e){
        e.preventDefault();
        var student = {};
        var name = document.getElementById('name').value;
        var lastName = document.getElementById('lastName').value;
        var email = document.getElementById('email').value;
        var picture = document.getElementById('picture').value;
        var skills = document.getElementById('skills').value.split(",");
        var index = document.getElementById("index").value;
        var tbody = document.getElementById('tbody');
        student.name = name;
        student.lastName = lastName;
        student.img = picture;
        student.email = email;
        student.skills = skills;
        if(index){
            students[index] = student;
            tbody.innerHTML= "";
            appendStudentRows(tbody);
           // tbody.insertRow(index + 1);
        }else{
            students.push(student);
            appendStudentRow(tbody, student);
        }
        
       
        document.getElementById("reset").click();
    }

    function sort(field, isAsc){
        students.sort(function(a,b){
            if(a[field] < b[field]){
               return isAsc?-1:1;
            }else if(a[field] > b[field]){
                return isAsc?1:-1;
            }
            return 0;
        });
        var tbody = document.getElementById('tbody');
        tbody.innerHTML= "";
        appendStudentRows(tbody);
    }




createForm();
createTable();
